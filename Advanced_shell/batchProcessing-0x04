#!/bin/bash
# -----------------------------------------
# Task: Parallel Data Fetching
# Objective: Fetch PokÃ©mon data in parallel
# -----------------------------------------

# API base URL
API_URL="https://pokeapi.co/api/v2/pokemon"

# Output directory for individual PokÃ©mon data
OUTPUT_DIR="./pokemon_data"
mkdir -p "$OUTPUT_DIR"

# List of PokÃ©mon to fetch
POKEMON_LIST=("bulbasaur" "ivysaur" "venusaur" "charmander" "charmeleon")

# Function to fetch PokÃ©mon data
fetch_pokemon_data() {
    local name=$1
    local output_file="${OUTPUT_DIR}/${name}.json"

    echo "Fetching data for $name..."
    
    # Fetch data silently (-s) and check for success
    if curl -s -f "${API_URL}/${name}" -o "$output_file"; then
        echo "âœ… Successfully fetched $name"
    else
        echo "âŒ Failed to fetch $name" >&2
    fi
}

# Loop through PokÃ©mon and fetch data in parallel
for name in "${POKEMON_LIST[@]}"; do
    fetch_pokemon_data "$name" &   # Run in background
done

# Wait for all background processes to finish
wait

echo "ðŸŽ‰ All PokÃ©mon data fetched and saved to $OUTPUT_DIR"
